<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>View Confirmation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="../css/styles1.css" rel="stylesheet" id="style-css">
</head>
<body>
    <nav class="top-nav">
        <div class="logo">
            <h4>Wallet Holder</h4>
        </div>

        <div>
            <button class="logout-btn" onclick="window.location.href = 'logout.html'">Logout</button>
        </div>

    </nav>
      
     
    </nav>

    <!-- Delivery and Date Options (Positioned differently for mobile and desktop) -->
    <div class="delivery-options">
        <button class="delivery-btn" onclick="window.location.href = 'viewCV.html'">BlockChain CV</button>
        <button class="delivery-btn" onclick="window.location.href = 'viewRquest.html'">CV request</button>
        <button class="delivery-btn" onclick="window.location.href = 'shareQRCode.html'">QR Code</button>
        
    </div>

    <main class="main-content">
    
        <div class="info-list" id="infoList" >
            <div class="confirm-card">
                <div class="confirm-info">
                    <h3 id="confirmationMessage"></h3>
                    <div class="confirm-buttons">
                        <button class="yes-btn" id="acceptButton" >Accept</button>
                        <button class="no-btn" id="rejectButton">Reject</button>
                    </div>
                  
                    
                    
                </div>
            </div>
          
        </div>
    </main>
        

    <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
    <script src="../js/contract.js"></script>
    <script src="../js/bcFunction.js"></script>

    <script>
        window.onload = async function() {
            const requestIndex = sessionStorage.getItem('requestIndex');
            const recruiter = sessionStorage.getItem('recruiter');
            const segmentType = sessionStorage.getItem('segmentType');
            const email = sessionStorage.getItem('email');
            const userName = sessionStorage.getItem('userName');
            const companyName = sessionStorage.getItem('companyName');

            // Set the confirmation message based on the action
            const confirmationMessage = document.getElementById('confirmationMessage');
            confirmationMessage.innerHTML = `
            Do you want to response the request from: <br> <br>
            <u><h3>Requester Details:</h3></u> <br>
            
            <p>Recruiter Name: ${userName}</p>
            <p>Company Name: ${companyName}</p>
            <p>Email: ${email}</p>
            Segment Type: ${segmentType}
            
            `;

            const acceptButton = document.getElementById('acceptButton');
            const rejectButton = document.getElementById('rejectButton');

            acceptButton.onclick = async function() {
                // Call the respondToRequest function with 'Accepted'
                await handleResponse(requestIndex, 'Accepted');
            };

            rejectButton.onclick = async function() {
                // Call the respondToRequest function with 'Rejected'
                await handleResponse(requestIndex, 'Rejected');
            };
        };
    </script>
</body>
</html>
